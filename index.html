<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App Cost Estimator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        gray: {
                            900: '#111827',
                            800: '#1f2937',
                            700: '#374151',
                            600: '#4b5563',
                            500: '#6b7280',
                            400: '#9ca3af',
                            300: '#d1d5db',
                            200: '#e5e7eb',
                            100: '#f3f4f6',
                            50: '#f9fafb',
                        },
                        amber: {
                            500: '#f59e0b',
                            600: '#d97706',
                            900: '#78350f',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        html { scroll-behavior: smooth; }
        ::-webkit-scrollbar { width: 8px; }
        .dark ::-webkit-scrollbar-track { background: #1f2937; }
        ::-webkit-scrollbar-track { background: #f3f4f6; }
        ::-webkit-scrollbar-thumb { background: #d97706; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #f59e0b; }

        .quote-checkbox { accent-color: #d97706; cursor: pointer; }

        .platform-card.selected {
            border-color: #d97706 !important;
            background-color: rgba(217, 119, 6, 0.15);
        }
        .platform-card.selected svg { color: #d97706 !important; }

        @media print {
            body { background-color: white !important; color: black !important; padding: 0 !important; margin: 0 !important; }
            .max-w-4xl { max-width: none !important; }
            header, .print-button, #theme-toggle, #platform-selection-area { display: none !important; }
            #quote-summary-wrapper { position: relative !important; top: 0 !important; margin-bottom: 2rem !important; box-shadow: none !important; border-bottom: 4px solid #d97706; border-radius: 0 !important; background-color: transparent !important; }
            #quote-summary-wrapper .bg-white, #quote-summary-wrapper .dark\:bg-gray-800 { background-color: white !important; border: 1px solid #ccc !important; color: black !important; }
            .feature-container { padding-top: 0 !important; box-shadow: none !important; border: none !important; background-color: white !important; color: black !important; }
            .feature-list { max-height: none !important; overflow: visible !important; padding-right: 0 !important; }
            .quote-checkbox { display: none !important; }
            .grid { display: block !important; }
            .feature-item { display: block; padding: 10px 0 !important; background-color: white !important; border: none !important; border-bottom: 1px dashed #ccc !important; color: black !important; }
            .feature-item:not(.print-selected):not(.base-setup-item) { display: none !important; }
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans antialiased p-4 sm:p-8 transition-colors duration-300">

<div class="max-w-4xl mx-auto">
    <!-- Header -->
    <header class="flex flex-col md:flex-row justify-between items-center mb-8 relative">
        <div class="text-center md:text-left">
            <h1 class="text-4xl sm:text-5xl font-extrabold text-gray-900 dark:text-white tracking-tight">
                App <span class="text-amber-600">Cost Estimator</span>
            </h1>
            <p class="mt-3 text-lg text-gray-600 dark:text-gray-400">Rate: R500/hr • 8hr days •
                20-day working month.</p>
        </div>

        <button id="theme-toggle" onclick="toggleTheme()"
                class="mt-4 md:mt-0 p-3 rounded-full bg-gray-200 dark:bg-gray-800 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-700 transition-colors shadow-sm">
            <svg id="theme-toggle-light-icon" class="hidden w-6 h-6" fill="currentColor"
                 viewBox="0 0 20 20">
                <path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"
                      fill-rule="evenodd" clip-rule="evenodd"></path>
            </svg>
            <svg id="theme-toggle-dark-icon" class="hidden w-6 h-6" fill="currentColor"
                 viewBox="0 0 20 20">
                <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
            </svg>
        </button>
    </header>

    <!-- PINNED QUOTE SUMMARY BAR -->
    <div id="quote-summary-wrapper"
         class="sticky top-4 z-20 mb-6 rounded-2xl shadow-xl shadow-gray-400/20 dark:shadow-black/50">
        <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white p-4 sm:p-6 rounded-2xl backdrop-blur-sm bg-opacity-95 dark:bg-opacity-95 transition-colors duration-300">
            <div class="flex justify-between items-center mb-4 border-b border-gray-200 dark:border-gray-700 pb-2">
                <div>
                    <h2 class="text-xl sm:text-2xl font-bold">Project Summary</h2>
                    <p id="formatted-time-display"
                       class="text-xs text-amber-600 font-bold uppercase tracking-wider">Estimated
                        Timeline: 0h</p>
                </div>
                <button onclick="printQuote()"
                        class="print-button flex items-center gap-2 bg-amber-600 hover:bg-amber-500 text-white px-3 py-1.5 rounded-lg text-sm font-medium transition-colors shadow-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none"
                         viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"/>
                    </svg>
                    <span class="hidden sm:inline">Print Quote</span>
                </button>
            </div>

            <div class="flex justify-between flex-wrap gap-y-4">
                <div class="flex-1 min-w-[45%] lg:min-w-0 pr-4 border-r border-gray-200 dark:border-gray-700">
                    <p class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400 font-semibold">
                        Base Effort</p>
                    <span id="base-hours-display"
                          class="text-lg font-bold text-gray-700 dark:text-gray-300">0 hrs</span>
                    <p id="base-cost-display" class="text-sm font-semibold text-amber-600">R0</p>
                </div>
                <div class="flex-1 min-w-[45%] lg:min-w-0 px-4 lg:border-r border-gray-200 dark:border-gray-700">
                    <p class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400 font-semibold">
                        Feature Effort</p>
                    <span id="feature-hours-display"
                          class="text-lg font-bold text-gray-700 dark:text-gray-300">0 hrs</span>
                    <p id="feature-cost-display" class="text-sm font-semibold text-amber-600">R0</p>
                </div>
                <div class="flex-1 w-full lg:w-auto mt-2 pt-2 lg:mt-0 lg:pt-0 lg:pl-4">
                    <p class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400 font-semibold">
                        TOTAL QUOTE</p>
                    <span id="total-quote-display"
                          class="text-2xl sm:text-3xl font-extrabold text-gray-900 dark:text-white">R0</span>
                    <p id="multiplier-label"
                       class="text-[10px] text-amber-600 dark:text-amber-500 font-bold uppercase mt-1">
                        Platform: Android</p>
                </div>
            </div>
        </div>
    </div>

    <!-- PLATFORM SELECTION SECTION -->
    <div id="platform-selection-area"
         class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 mb-8 transition-colors duration-300">
        <h3 class="text-lg font-bold mb-4 text-gray-900 dark:text-white">1. Select Target
            Platform</h3>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
            <div onclick="setPlatform('android')" id="platform-android"
                 class="platform-card selected flex flex-col items-center p-6 border-2 border-gray-200 dark:border-gray-700 rounded-xl cursor-pointer hover:border-amber-600 transition-all group">
                <svg class="w-12 h-12 mb-2 text-gray-400 group-hover:text-amber-600 transition-colors"
                     fill="currentColor" viewBox="0 0 24 24">
                    <path d="M17.523 15.3414C16.8921 15.3414 16.3761 15.8574 16.3761 16.4883C16.3761 17.1192 16.8921 17.6352 17.523 17.6352C18.1539 17.6352 18.6699 17.1192 18.6699 16.4883C18.6699 15.8574 18.1539 15.3414 17.523 15.3414ZM6.47702 15.3414C5.84612 15.3414 5.33013 15.8574 5.33013 16.4883C5.33013 17.1192 5.84612 17.6352 6.47702 17.6352C7.10792 17.6352 7.62391 17.1192 7.62391 16.4883C7.62391 15.8574 7.10792 15.3414 6.47702 15.3414ZM17.9152 11.0029L19.7903 7.75519C19.9271 7.5181 19.8459 7.21443 19.6088 7.07764C19.3718 6.94084 19.0681 7.02206 19.6088 7.07764C19.3718 6.94084 19.0681 7.02206 18.9313 7.25916L17.0315 10.5492C15.5457 9.87034 13.8566 9.48832 12 9.48832C10.1434 9.48832 8.45427 9.87034 6.96853 10.5492L5.06869 7.25916C4.93189 7.02206 4.62823 6.94084 4.39113 7.07764C4.15404 7.21443 4.07282 7.5181 4.20961 7.75519L6.08476 11.0029C3.1795 12.6366 1.22913 15.6515 1.22913 19.1437H22.7709C22.7709 15.6515 20.8205 12.6366 17.9152 11.0029Z"/>
                </svg>
                <span class="font-bold text-lg">Android</span>
            </div>
            <div onclick="setPlatform('ios')" id="platform-ios"
                 class="platform-card flex flex-col items-center p-6 border-2 border-gray-200 dark:border-gray-700 rounded-xl cursor-pointer hover:border-amber-600 transition-all group">
                <svg class="w-12 h-12 mb-2 text-gray-400 group-hover:text-amber-600 transition-colors"
                     fill="currentColor" viewBox="0 0 24 24">
                    <path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.1 2.48-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.36 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/>
                </svg>
                <span class="font-bold text-lg">iOS</span>
            </div>
            <div onclick="setPlatform('multiplatform')" id="platform-multiplatform"
                 class="platform-card flex flex-col items-center p-6 border-2 border-gray-200 dark:border-gray-700 rounded-xl cursor-pointer hover:border-amber-600 transition-all group">
                <div class="flex gap-2 mb-2">
                    <svg class="w-12 h-12 text-gray-400 group-hover:text-amber-600 transition-colors"
                         fill="currentColor" viewBox="0 0 24 24">
                        <path d="M17.523 15.3414C16.8921 15.3414 16.3761 15.8574 16.3761 16.4883C16.3761 17.1192 16.8921 17.6352 17.523 17.6352C18.1539 17.6352 18.6699 17.1192 18.6699 16.4883C18.6699 15.8574 18.1539 15.3414 17.523 15.3414ZM6.47702 15.3414C5.84612 15.3414 5.33013 15.8574 5.33013 16.4883C5.33013 17.1192 5.84612 17.6352 6.47702 17.6352C7.10792 17.6352 7.62391 17.1192 7.62391 16.4883C7.62391 15.8574 7.10792 15.3414 6.47702 15.3414ZM17.9152 11.0029L19.7903 7.75519C19.9271 7.5181 19.8459 7.21443 19.6088 7.07764C19.3718 6.94084 19.0681 7.02206 19.6088 7.07764C19.3718 6.94084 19.0681 7.02206 18.9313 7.25916L17.0315 10.5492C15.5457 9.87034 13.8566 9.48832 12 9.48832C10.1434 9.48832 8.45427 9.87034 6.96853 10.5492L5.06869 7.25916C4.93189 7.02206 4.62823 6.94084 4.39113 7.07764C4.15404 7.21443 4.07282 7.5181 4.20961 7.75519L6.08476 11.0029C3.1795 12.6366 1.22913 15.6515 1.22913 19.1437H22.7709C22.7709 15.6515 20.8205 12.6366 17.9152 11.0029Z"/>
                    </svg>
                    <svg class="w-12 h-12 text-gray-400 group-hover:text-amber-600 transition-colors"
                         fill="currentColor" viewBox="0 0 24 24">
                        <path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.1 2.48-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.36 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/>
                    </svg>
                </div>
                <span class="font-bold text-lg">Multiplatform</span>
            </div>
        </div>
    </div>

    <!-- Feature Selection Column -->
    <div class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 feature-container transition-colors duration-300">
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 border-b border-gray-200 dark:border-gray-700 pb-4">
            2. Select App Features</h2>
        <div id="feature-list" class="feature-list max-h-[60vh] overflow-y-auto pr-2"></div>
    </div>
</div>

<script>
    const HOURLY_RATE = 500;
    const BASE_HOURS = 40;
    const HOURS_PER_DAY = 8;
    const DAYS_PER_WEEK = 5;
    const WEEKS_PER_MONTH = 4;
    let platformMultiplier = 1;

    function toggleTheme() {
        const isDark = document.documentElement.classList.toggle('dark');
        document.getElementById('theme-toggle-light-icon').classList.toggle('hidden', !isDark);
        document.getElementById('theme-toggle-dark-icon').classList.toggle('hidden', isDark);
        localStorage.setItem('color-theme', isDark ? 'dark' : 'light');
    }

    if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark');
        document.getElementById('theme-toggle-light-icon').classList.remove('hidden');
    } else {
        document.getElementById('theme-toggle-dark-icon').classList.remove('hidden');
    }

    const FEATURES = [
        { id: 'auth', name: 'User Authentication', hours: 28, desc: 'Login, registration, and password recovery via email or social providers.' },
        { id: 'backend', name: 'Custom Backend', hours: 31, desc: 'A secure server-side database to manage your application data and logic.' },
        { id: 'admin', name: 'Web Admin Panel', hours: 30, desc: 'A web-based dashboard for you to manage users and view app statistics.' },
        { id: 'notifications', name: 'Push Notifications', hours: 26, desc: 'Send automated alerts and updates directly to user devices.' },
        { id: 'payments', name: 'Payment Integration', hours: 32, desc: 'Securely accept credit cards and digital wallets like Apple Pay or Google Pay.' },
        { id: 'subscription', name: 'Subscriptions', hours: 29, desc: 'Monthly or yearly recurring billing models for premium app content.' },
        { id: 'chat', name: 'Real-time Chat', hours: 35, desc: 'Instant messaging between users with support for text and media.' },
        { id: 'gps', name: 'GPS & Mapping', hours: 27, desc: 'Location tracking, interactive maps, and proximity-based features.' },
        { id: 'camera', name: 'Camera Access', hours: 25, desc: 'Capture photos/videos directly within the app for profiles or content.' },
        { id: 'offline', name: 'Offline Sync', hours: 29, desc: 'Allow users to work without internet; data syncs automatically when online.' },
        { id: 'biometric', name: 'Biometric Login', hours: 25, desc: 'Enhanced security using FaceID or Fingerprint authentication.' },
        { id: 'ui_ux', name: 'Custom UI/UX Design', hours: 33, desc: 'Tailor-made interfaces designed specifically for your brand identity.' },
        { id: 'analytics', name: 'Advanced Analytics', hours: 26, desc: 'Track user behavior and conversion funnels to improve engagement.' },
        { id: 'ai_ml', name: 'AI Integration', hours: 31, desc: 'Smart features like image recognition, chatbots, or personalized recommendations.' },
        { id: 'hardware', name: 'IoT/Hardware', hours: 34, desc: 'Connectivity with external devices via Bluetooth or local network.' },
    ];

    function formatCurrency(amount) {
        return new Intl.NumberFormat('en-ZA', { style: 'currency', currency: 'ZAR', minimumFractionDigits: 0 }).format(amount).replace(/ZAR/, 'R');
    }

    function formatTimeEstimate(totalHours) {
        if (totalHours === 0) return "0 hrs";
        const hoursInMonth = HOURS_PER_DAY * DAYS_PER_WEEK * WEEKS_PER_MONTH;
        const hoursInWeek = HOURS_PER_DAY * DAYS_PER_WEEK;
        const hoursInDay = HOURS_PER_DAY;

        let remaining = totalHours;
        const months = Math.floor(remaining / hoursInMonth);
        remaining %= hoursInMonth;
        const weeks = Math.floor(remaining / hoursInWeek);
        remaining %= hoursInWeek;
        const days = Math.floor(remaining / hoursInDay);
        remaining %= hoursInDay;
        const hours = Math.round(remaining * 10) / 10;

        const parts = [];
        if (months > 0) parts.push(`${months}m`);
        if (weeks > 0) parts.push(`${weeks}w`);
        if (days > 0) parts.push(`${days}d`);
        if (hours > 0) parts.push(`${hours}h`);

        return parts.length > 0 ? parts.join(' ') : "0h";
    }

    function setPlatform(platform) {
        document.querySelectorAll('.platform-card').forEach(card => card.classList.remove('selected'));
        const el = document.getElementById(`platform-${platform}`);
        if (el) el.classList.add('selected');

        if(platform === 'android') platformMultiplier = 1;
        else if(platform === 'ios') platformMultiplier = 1.5;
        else platformMultiplier = 2;

        const displayName = platform === 'multiplatform' ? 'Multiplatform' : (platform.charAt(0).toUpperCase() + platform.slice(1));
        document.getElementById('multiplier-label').textContent = `Platform: ${displayName}`;

        updateQuote();
        updateFeatureCardLabels();
    }

    function updateFeatureCardLabels() {
        FEATURES.forEach(f => {
            const labelEl = document.getElementById(`cost-label-${f.id}`);
            const hoursEl = document.getElementById(`hours-label-${f.id}`);
            if (labelEl && hoursEl) {
                const adjustedHours = f.hours * platformMultiplier;
                labelEl.textContent = `est. ${formatCurrency(adjustedHours * HOURLY_RATE)}`;
                hoursEl.textContent = `${adjustedHours} hrs`;
            }
        });

        const baseSetupCostEl = document.getElementById('base-setup-cost-label');
        const baseSetupHoursEl = document.getElementById('base-setup-hours-label-static');
        if (baseSetupCostEl && baseSetupHoursEl) {
            const adjustedBaseHours = BASE_HOURS * platformMultiplier;
            baseSetupCostEl.textContent = `est. ${formatCurrency(adjustedBaseHours * HOURLY_RATE)}`;
            baseSetupHoursEl.textContent = `${adjustedBaseHours} hrs`;
        }
    }

    function renderFeatures() {
        const baseSetupItem = `
            <div class="flex items-center p-4 bg-gray-100 dark:bg-gray-700 rounded-xl border border-gray-300 dark:border-gray-600 feature-item print-selected base-setup-item w-full mb-4">
                <div class="flex-1">
                    <span class="text-amber-600 font-bold text-lg block">Base Setup & Scaffolding</span>
                    <p class="text-gray-600 dark:text-gray-300 text-sm">Foundational infrastructure, project management, and environment configuration.</p>
                </div>
                <div class="text-right ml-4">
                    <span id="base-setup-hours-label-static" class="text-amber-600 font-bold text-sm bg-amber-100 dark:bg-amber-900/30 px-2 py-0.5 rounded block mb-1">${BASE_HOURS} hrs</span>
                    <span id="base-setup-cost-label" class="text-[10px] text-gray-500 dark:text-gray-400 font-mono">est. ${formatCurrency(BASE_HOURS * HOURLY_RATE)}</span>
                </div>
            </div>
            <div class="border-t border-gray-200 dark:border-gray-700 mb-6"></div>
        `;

        const featureHtml = FEATURES.map(f => `
            <label for="${f.id}" class="flex items-start p-4 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl cursor-pointer transition-all border border-transparent hover:border-amber-600 feature-item group h-full">
                <input type="checkbox" id="${f.id}" data-hours="${f.hours}" class="mt-1.5 h-5 w-5 text-amber-600 bg-gray-200 dark:bg-gray-600 border-gray-400 dark:border-gray-500 rounded quote-checkbox flex-shrink-0">
                <div class="ml-4 flex-1">
                    <span class="text-gray-900 dark:text-white font-semibold text-lg group-hover:text-amber-600 block leading-tight">${f.name}</span>
                    <p class="text-gray-500 dark:text-gray-400 text-xs mt-1 leading-relaxed">${f.desc}</p>
                </div>
                <div class="text-right ml-4 flex-shrink-0">
                    <span id="hours-label-${f.id}" class="text-amber-600 font-bold text-sm bg-amber-100 dark:bg-amber-900/30 px-2 py-0.5 rounded block mb-1">${f.hours} hrs</span>
                    <span id="cost-label-${f.id}" class="text-[10px] text-gray-500 dark:text-gray-400 font-mono">est. ${formatCurrency(f.hours * HOURLY_RATE)}</span>
                </div>
            </label>
        `).join('');

        document.getElementById('feature-list').innerHTML = baseSetupItem + `<div class="grid grid-cols-1 md:grid-cols-2 gap-4">${featureHtml}</div>`;
        document.querySelectorAll('.quote-checkbox').forEach(cb => cb.addEventListener('change', updateQuote));
        updateQuote();
        updateFeatureCardLabels();
    }

    function updateQuote() {
        let featureHoursTotalRaw = 0;
        document.querySelectorAll('.quote-checkbox').forEach(cb => {
            const item = cb.closest('.feature-item');
            if (cb.checked) {
                featureHoursTotalRaw += parseInt(cb.dataset.hours);
                item.classList.add('print-selected', 'border-amber-600', 'bg-gray-100', 'dark:bg-gray-700');
            } else {
                item.classList.remove('print-selected', 'border-amber-600', 'bg-gray-100', 'dark:bg-gray-700');
            }
        });

        const totalBaseHours = BASE_HOURS * platformMultiplier;
        const totalFeatureHours = featureHoursTotalRaw * platformMultiplier;
        const grandTotalHours = totalBaseHours + totalFeatureHours;

        const baseCost = totalBaseHours * HOURLY_RATE;
        const featureCost = totalFeatureHours * HOURLY_RATE;
        const grandTotalCost = baseCost + featureCost;

        document.getElementById('base-hours-display').textContent = `${totalBaseHours} hrs`;
        document.getElementById('base-cost-display').textContent = formatCurrency(baseCost);
        document.getElementById('feature-hours-display').textContent = `${totalFeatureHours} hrs`;
        document.getElementById('feature-cost-display').textContent = formatCurrency(featureCost);
        document.getElementById('formatted-time-display').textContent = `Timeline: ${formatTimeEstimate(grandTotalHours)} total effort`;
        document.getElementById('total-quote-display').textContent = formatCurrency(grandTotalCost);
    }

    function printQuote() { window.print(); }
    document.addEventListener('DOMContentLoaded', renderFeatures);
</script>
</body>
</html>